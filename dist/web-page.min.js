!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).WebPage={})}(this,(function(e){"use strict";var n,i,t="show",o="hide",d="enter",f="leave",a=!1,s={},r={};function u(e,n){return"on"+n in e}function c(e,n,i){e.addEventListener?e.addEventListener(n,i,!0):e.attachEvent&&e.attachEvent("on"+n,i)}function v(e,t){var o={event:t,visible:n,persisted:i};s[e]=o,a&&l(e,o)}function l(e,n){var i=r[e];if(i)for(var t=0,o=i.length;t<o;t++)i[t]&&i[t](n)}function p(){var e=document.visibilityState;n="visible"===e||"hidden"!==e&&void 0}function h(e){"boolean"==typeof e.persisted&&(i=e.persisted),v(d,e)}var w,b,g,E=(w=function(e){v(f,e)},b=200,function(){g||(w(arguments[0]),g=setTimeout((function(){g=void 0}),b))});u(document,"visibilitychange")&&c(document,"visibilitychange",(function(e){p(),!0===n?v(t,e):!1===n&&v(o,e)})),u(window,"pageshow")?c(window,"pageshow",h):c(window,"load",h),u(window,"pagehide")&&c(window,"pagehide",E),c(window,"beforeunload",E);e.ENTER=d,e.HIDE=o,e.LEAVE=f,e.SHOW=t,e.addEventListener=function(e,n){var i=r[e]||(r[e]=[]);return i.push(n),e===d&&s[e]&&l(e,s[e]),{remove:function(){for(var e=0,t=i.length;e<t;e++)i[e]===n&&i.splice(e,1)}}},e.init=function(){p(),a=!0},e.version="0.0.3",Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=web-page.min.js.map
