!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).WebPage={})}(this,(function(e){"use strict";var n,i,t="show",o="hide",d="enter",r="leave",f=!1,u=!1,a={},s={};function c(e,n){return"on"+n in e}function v(e,n,i){e.addEventListener?e.addEventListener(n,i,!0):e.attachEvent&&e.attachEvent("on"+n,i)}function l(e,n){var i;return function(){i||(e(arguments[0]),i=setTimeout((function(){i=void 0}),n))}}function h(e,t){var o={event:t,visible:n,persisted:i};a[e]=o,f&&u&&p(e,o)}function p(e,n){var i=s[e];if(i)for(var t=0,o=i.length;t<o;t++)i[t]&&i[t](n)}function w(){var e=document.visibilityState;n="visible"===e||"hidden"!==e&&void 0}var b=l((function(e){u||(u=!0,i=!0===e.persisted,h(d,e))}),200),g=l((function(e){u&&(i=!0===e.persisted,h(r,e),u=!1)}),200);c(document,"visibilitychange")&&v(document,"visibilitychange",(function(e){w(),!0===n?h(t,e):!1===n&&h(o,e)})),c(window,"pageshow")&&v(window,"pageshow",b),v(window,"load",b),c(window,"pagehide")&&v(window,"pagehide",g),v(window,"beforeunload",g);e.ENTER=d,e.HIDE=o,e.LEAVE=r,e.SHOW=t,e.addEventListener=function(e,n){var i=s[e]||(s[e]=[]);return i.push(n),e===d&&a[e]&&p(e,a[e]),{remove:function(){for(var e=0,t=i.length;e<t;e++)i[e]===n&&i.splice(e,1)}}},e.init=function(){f=!0,w()},e.version="0.0.5",Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=web-page.min.js.map
