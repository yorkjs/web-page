const n="show",e="hide",t="enter",i="leave";let o,c,s=!1,d=!1;const u={},r={};function a(n,e){return`on${e}`in n}function f(n,e,t){n.addEventListener?n.addEventListener(e,t,!0):n.attachEvent&&n.attachEvent("on"+e,t)}function h(n,e){let t;return function(){t||(n(arguments[0]),t=setTimeout((function(){t=void 0}),e))}}function l(n,e){const t={event:e,visible:o,persisted:c};u[n]=t,s&&d&&w(n,t)}function w(n,e){const t=r[n];if(t)for(let n=0,i=t.length;n<i;n++)t[n]&&t[n](e)}function v(){const n=document.visibilityState;o="visible"===n||"hidden"!==n&&void 0}const p=h((function(n){d||(d=!0,c=!0===n.persisted,l("enter",n))}),200),g=h((function(n){d&&(c=!0===n.persisted,l("leave",n),d=!1)}),200);function b(){s=!0,v()}function m(n,e){const t=r[n]||(r[n]=[]);return t.push(e),"enter"===n&&u[n]&&w(n,u[n]),{remove(){for(let n=0,i=t.length;n<i;n++)t[n]===e&&t.splice(n,1)}}}a(document,"visibilitychange")&&f(document,"visibilitychange",(function(n){v(),!0===o?l("show",n):!1===o&&l("hide",n)})),a(window,"pageshow")&&f(window,"pageshow",p),f(window,"load",p),a(window,"pagehide")&&f(window,"pagehide",g),f(window,"beforeunload",g);const E="0.0.5";export{t as ENTER,e as HIDE,i as LEAVE,n as SHOW,m as addEventListener,b as init,E as version};
//# sourceMappingURL=web-page.esm.min.js.map
