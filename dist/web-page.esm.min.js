const n="show",e="hide",t="enter",i="leave";let o,c,d=!1,s=!1;const u={},w={};function f(n,e){return`on${e}`in n}function r(n,e,t){n.addEventListener?n.addEventListener(e,t,!0):n.attachEvent&&n.attachEvent("on"+e,t)}function a(n,e){let t;return function(){t||(n(arguments[0]),t=setTimeout((function(){t=void 0}),e))}}function h(n,e){const t={event:e,visible:o,persisted:c};u[n]=t,d&&!s&&l(n,t)}function l(n,e){const t=w[n];if(t)for(let n=0,i=t.length;n<i;n++)t[n]&&t[n](e)}function v(){const n=document.visibilityState;o="visible"===n||"hidden"!==n&&void 0}const p=a((function(n){d||(d=!0,h("enter",n))}),200),g=a((function(n){d&&(h("leave",n),d=!1)}),200);function m(){}function b(n,e){const t=w[n]||(w[n]=[]);return t.push(e),"enter"===n&&u[n]&&l(n,u[n]),{remove(){for(let n=0,i=t.length;n<i;n++)t[n]===e&&t.splice(n,1)}}}v(),f(document,"visibilitychange")&&r(document,"visibilitychange",(function(n){v(),!0===o?h("show",n):!1===o&&h("hide",n)})),f(window,"pageshow")?r(window,"pageshow",(function(n){c=n.persisted,p(n)})):r(window,"load",p),f(window,"pagehide")&&r(window,"pagehide",(function(n){c=n.persisted,g(n)})),r(window,"beforeunload",g),f(window,"freeze")&&r(window,"freeze",(function(){s=!0})),f(window,"resume")&&r(window,"resume",(function(){s=!1}));const E="0.0.7";export{t as ENTER,e as HIDE,i as LEAVE,n as SHOW,b as addEventListener,m as init,E as version};
//# sourceMappingURL=web-page.esm.min.js.map
