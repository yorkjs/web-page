const n="show",e="hide",t="enter",i="leave";let o,c,s=!1;const d={},u={};function r(n,e){return`on${e}`in n}function a(n,e,t){n.addEventListener?n.addEventListener(e,t,!0):n.attachEvent&&n.attachEvent("on"+e,t)}function f(n,e){const t={event:e,visible:o,persisted:c};d[n]=t,s&&l(n,t)}function l(n,e){const t=u[n];if(t)for(let n=0,i=t.length;n<i;n++)t[n]&&t[n](e)}function h(){const n=document.visibilityState;o="visible"===n||"hidden"!==n&&void 0}function w(n){"boolean"==typeof n.persisted&&(c=n.persisted),f("enter",n)}const v=function(n,e){let t;return function(){t||(n(arguments[0]),t=setTimeout((function(){t=void 0}),e))}}((function(n){f("leave",n)}),200);function p(){h(),s=!0}function g(n,e){const t=u[n]||(u[n]=[]);return t.push(e),"enter"===n&&d[n]&&l(n,d[n]),{remove(){for(let n=0,i=t.length;n<i;n++)t[n]===e&&t.splice(n,1)}}}r(document,"visibilitychange")&&a(document,"visibilitychange",(function(n){h(),!0===o?f("show",n):!1===o&&f("hide",n)})),r(window,"pageshow")?a(window,"pageshow",w):a(window,"load",w),r(window,"pagehide")&&a(window,"pagehide",v),a(window,"beforeunload",v);const b="0.0.3";export{t as ENTER,e as HIDE,i as LEAVE,n as SHOW,g as addEventListener,p as init,b as version};
//# sourceMappingURL=web-page.esm.min.js.map
