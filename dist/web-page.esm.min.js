const n="show",e="hide",t="enter",i="leave";let o,c,u,d=!1;const s={},f={};function r(n,e){return`on${e}`in n}function a(n,e,t){n.addEventListener?n.addEventListener(e,t,!0):n.attachEvent&&n.attachEvent("on"+e,t)}function h(n,e){let t;return function(){t||(n(arguments[0]),t=setTimeout((function(){t=void 0}),e))}}function l(n,e){const t={event:e,visible:c,persisted:u};s[n]=t,!1===o||d||w(n,t)}function w(n,e){const t=f[n];if(t)for(let n=0,i=t.length;n<i;n++)t[n]&&t[n](e)}function v(){const n=document.visibilityState;c="visible"===n||"hidden"!==n&&void 0}const m=h((function(n){o||(o=!0,l("enter",n))}),200),p=h((function(n){!1!==o&&(l("leave",n),o=!1)}),200);function g(){}function b(n,e){const t=f[n]||(f[n]=[]);return t.push(e),"enter"===n&&s[n]&&w(n,s[n]),{remove(){for(let n=0,i=t.length;n<i;n++)t[n]===e&&t.splice(n,1)}}}v(),r(document,"visibilitychange")&&a(document,"visibilitychange",(function(n){v(),!0===c?l("show",n):!1===c&&l("hide",n)})),r(document,"freeze")&&a(document,"freeze",(function(){d=!0})),r(document,"resume")&&a(document,"resume",(function(){d=!1})),r(window,"pageshow")?a(window,"pageshow",(function(n){u=n.persisted,m(n)})):a(window,"load",m),r(window,"pagehide")&&a(window,"pagehide",(function(n){u=n.persisted,p(n)})),a(window,"beforeunload",p);const E="0.1.0";export{t as ENTER,e as HIDE,i as LEAVE,n as SHOW,b as addEventListener,g as init,E as version};
//# sourceMappingURL=web-page.esm.min.js.map
